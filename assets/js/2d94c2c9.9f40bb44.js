"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[82315],{35318:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var a=n(27378);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(n),h=r,g=d["".concat(s,".").concat(h)]||d[h]||u[h]||i;return n?a.createElement(g,o(o({ref:t},p),{},{components:n})):a.createElement(g,o({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},91433:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return d},contentTitle:function(){return h},metadata:function(){return g},toc:function(){return m},default:function(){return b}});var a=n(35318),r=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&p(e,n,t[n]);if(l)for(var n of l(t))c.call(t,n)&&p(e,n,t[n]);return e};const d={id:"release-candidate-minor",title:"Release Minor Candidate"},h=void 0,g={unversionedId:"release-candidate-minor",id:"release-candidate-minor",title:"Release Minor Candidate",description:"This document goes over steps to run different types of React Native release updates. It is intended audience is for those in relevant release roles.",source:"@site/contributing/release-candidate-minor.md",sourceDirName:".",slug:"/release-candidate-minor",permalink:"/contributing/release-candidate-minor",editUrl:"https://github.com/facebook/react-native-website/blob/master/website/contributing/release-candidate-minor.md",tags:[],version:"current",lastUpdatedAt:1648760516,formattedLastUpdatedAt:"4/1/2022",frontMatter:{id:"release-candidate-minor",title:"Release Minor Candidate"},sidebar:"contributing",previous:{title:"How to contribute",permalink:"/contributing/how-to-contribute"},next:{title:"Release Patch Candidate",permalink:"/contributing/release-candidate-patch"}},m=[{value:"Pre-requisites",id:"pre-requisites",children:[],level:3},{value:"Creating 0.{minor}.0-rc.0",id:"creating-0minor0-rc0",children:[],level:3},{value:"2. Create a PR of the changelog generator",id:"2-create-a-pr-of-the-changelog-generator",children:[],level:3},{value:"3. Create a GitHub Release",id:"3-create-a-github-release",children:[],level:3},{value:"4. Create a tracking discussion post",id:"4-create-a-tracking-discussion-post",children:[],level:3},{value:"5. Verify that Upgrade Helper GitHub action has fired",id:"5-verify-that-upgrade-helper-github-action-has-fired",children:[],level:3},{value:"6. Broadcast that release candidate is out",id:"6-broadcast-that-release-candidate-is-out",children:[],level:3}],f={toc:m};function b(e){var t,n=e,{components:r}=n,p=((e,t)=>{var n={};for(var a in e)s.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&l)for(var a of l(e))t.indexOf(a)<0&&c.call(e,a)&&(n[a]=e[a]);return n})(n,["components"]);return(0,a.kt)("wrapper",(t=u(u({},f),p),i(t,o({components:r,mdxType:"MDXLayout"}))),(0,a.kt)("p",null,"This document goes over steps to run different types of React Native release updates. It is intended audience is for those in relevant release roles."),(0,a.kt)("h3",u({},{id:"pre-requisites"}),"Pre-requisites"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Write access to ",(0,a.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react-native"}),"react-native")," repository."),(0,a.kt)("li",{parentName:"ul"},"Your CircleCI personal API token. See ",(0,a.kt)("a",u({parentName:"li"},{href:"https://circleci.com/docs/2.0/managing-api-tokens/#creating-a-personal-api-token"}),"here")," on how to set one."),(0,a.kt)("li",{parentName:"ul"},"If testing, follow ",(0,a.kt)("a",u({parentName:"li"},{href:"/contributing/release-testing#pre-requisites"}),"pre-requisites for testing"),".")),(0,a.kt)("h3",u({},{id:"creating-0minor0-rc0"}),"Creating 0.{minor}.0-rc.0"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Create the release branch in ",(0,a.kt)("inlineCode",{parentName:"p"},"react-native")," repo with the appropriate name (usually ",(0,a.kt)("inlineCode",{parentName:"p"},"0.X-stable"),")."),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"git checkout main\ngit pull origin main\ngit checkout -b 0.68-stable\ngit push origin 0.68-stable\n\n# This will walk you through what version you are releasing\n./scripts/bump-oss-version.js -v 0.68.0-rc.0 -t <YOUR_CIRCLE_CI_TOKEN>\n"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Once you have run that script, head to CircleCI and you should see under the releases workflow, a ",(0,a.kt)("inlineCode",{parentName:"p"},"prepare-package-for-release")," job."),(0,a.kt)("figure",null,(0,a.kt)("img",{width:"400",alt:"CircleCI showing publish release",src:"https://user-images.githubusercontent.com/1309636/150040711-cfbc2fe3-91eb-42b9-bd06-de2aa7fb94ea.png"}),(0,a.kt)("figcaption",null,"CircleCI showing publish release."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"This script runs and commits any changes and triggers a deploy job, ",(0,a.kt)("inlineCode",{parentName:"p"},"build_and_publish_npm_package"),".")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Note: Look under \u201cAll Branches\u201d to find the publish job. CircleCI does not give a way to search for these jobs.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Once complete you should be able to run ",(0,a.kt)("inlineCode",{parentName:"p"},"npm view react-native")," and verify ",(0,a.kt)("inlineCode",{parentName:"p"},"next")," is expected release version."),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"npm view react-native\n...\ndist-tags:\nlatest: 0.65.1            next: 0.66.0-rc.2         nightly: 0.0.0-f617e022c\n")))),(0,a.kt)("h3",u({},{id:"2-create-a-pr-of-the-changelog-generator"}),"2. Create a PR of the changelog generator"),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"# Run following with the stable release as base, and your rc.0 version\nnpx @rnx-kit/rn-changelog-generator --base v[LATEST_STABLE]--compare v[YOUR_RC_0] \\\n--repo ~/react-native --changelog ~/react-native/CHANGELOG.md > NEW_CHANGES.md\n\n# example against 0.66.4 and 0.67.0-rc.0\nnpx @rnx-kit/rn-changelog-generator --base v0.66.4 --compare v0.67.0-rc.0 \\\n--repo ~/react-native --changelog ~/react-native/CHANGELOG.md > NEW_CHANGES.md\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Prepend contents of ",(0,a.kt)("inlineCode",{parentName:"li"},"NEW_CHANGES.md")," to ",(0,a.kt)("inlineCode",{parentName:"li"},"CHANGELOG.md"),"."),(0,a.kt)("li",{parentName:"ul"},"Create a pull request of this change to ",(0,a.kt)("inlineCode",{parentName:"li"},"react-native")," repo and add the ",(0,a.kt)("inlineCode",{parentName:"li"},"Changelog")," label.")),(0,a.kt)("h3",u({},{id:"3-create-a-github-release"}),"3. Create a GitHub Release"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Create a ",(0,a.kt)("a",u({parentName:"li"},{href:"https://github.com/facebook/react-native/releases"}),"GitHub Release")," with this template and ",(0,a.kt)("strong",{parentName:"li"},"check \u201cPre-Release\u201d checkbox"),".")),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{className:"language-markdown"}),"\x3c!-- Template for pre-release GitHub release --\x3e\n\n- \x3c!-- TODO List out notable picks for this patch --\x3e\n\n---\n\nTo test it, run:\n\n\x3c!-- TODO Update with your version --\x3e\n\nnpx react-native init RN067RC5 --version 0.67.0-rc.5\n\n---\n\nYou can participate in the conversation on the status of this release in the [working group](https://github.com/reactwg/react-native-releases/discussions).\n\n---\n\nTo help you upgrade to this version, you can use the [upgrade helper](https://react-native-community.github.io/upgrade-helper/) \u269b\ufe0f\n\n---\n\nSee changes from this release in the [changelog PR](https://github.com/facebook/react-native/labels/%F0%9F%93%9D%20Changelog)\n")),(0,a.kt)("figure",null,(0,a.kt)("img",{width:"400",alt:"Creating a GitHub Release",src:"https://user-images.githubusercontent.com/1309636/133348648-c33f82b8-b8d2-474a-a06e-35a1fb8d18de.png"}),(0,a.kt)("figcaption",null,"Creating a GitHub Release.")),(0,a.kt)("h3",u({},{id:"4-create-a-tracking-discussion-post"}),"4. Create a tracking discussion post"),(0,a.kt)("p",null,'Create a "Road to <YOUR_MINOR_VERSION>" discussion post in ',(0,a.kt)("a",u({parentName:"p"},{href:"https://github.com/reactwg/react-native-releases/discussions"}),(0,a.kt)("inlineCode",{parentName:"a"},"react-native-releases")),":"),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{className:"language-markdown"}),"\x3c!-- Template for a new minor release candidate --\x3e\n\x3c!-- Title: Road to <YOUR_VERSION> --\x3e\n\nThe branch cut has happened.\n\n## Notice\n\n\x3c!-- TODO update the version --\x3e\n\n- [Current release candidate: 0.68.0-rc.0][current-release]\n- Have an issue with current release candidate? [File an issue][issue-form] and we will triage.\n- Have a pick request for this release? Does it fall under our [pick request qualifications][release-faq]? If so please create a PR against the release branch and comment with the PR link\n- If you are release testing. Copy and fill [Test Checklist](/contributing/release-testing#test-checklist).\n\n#### Highlighted Changes in this release\n\n\x3c!-- Add stand-out changes in this release, and link to changelog PR.  --\x3e\n\n- Checkout this [Changelog PR][changelog-pr]\n\n## [Release Process][release-processes]\n\n#### Checklist\n\n- [ ] [Changelog PR][changelog-pr]\n- [ ] Start a Google doc of blog post for release and invite contributors of release highlights to expand\n- [ ] Follow up on [release dependencies][release-dependencies]\n  > When ready to publish stable\n- [ ] Ship changelog\n- [ ] Ship blog post\n- [ ] Notify `react-native-website` to ship new version\n\n#### Retrospective Topics\n\n\x3c!-- List out pain points, issues to investigate that are not release-blocking to follow up on --\x3e\n\n-\n\n## Release Status\n\n### Tracking 0.67.0-rc.1\n\n#### Blocking issues for releasing 0.67.0-rc.1\n\n-\n\n#### Picks for 0.67.0-rc.1\n\n-\n\n[changelog-pr]: https://github.com/facebook/react-native/labels/%F0%9F%93%9D%20Changelog\n[current-release]: https://github.com/facebook/react-native/releases\n[changelog-wiki]: https://github.com/facebook/react-native/wiki/Release-Changelog\n[release-dependencies]: https://reactnative.dev/contributing/release-dependencies\n[release-faq]: https://reactnative.dev/contributing/release-faq\n[issue-form]: https://github.com/facebook/react-native/issues/new?assignees=&labels=Needs%3A+Triage+%3Amag%3A%2Cpre-release&template=release_blocker_form.yml\n[releases]: https://github.com/facebook/react-native/releases\n[release-processes]: https://reactnative.dev/contributing/how-to\n[upgrade-helper]: https://reactnative.dev/contributing/updating-upgrade-helper\n")),(0,a.kt)("h3",u({},{id:"5-verify-that-upgrade-helper-github-action-has-fired"}),"5. Verify that Upgrade Helper GitHub action has fired"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"You should see a ",(0,a.kt)("a",u({parentName:"li"},{href:"https://github.com/react-native-community/rn-diff-purge/actions"}),"new publish job complete here"),"."),(0,a.kt)("li",{parentName:"ul"},"If not, check out the guide on ",(0,a.kt)("a",u({parentName:"li"},{href:"/contributing/updating-upgrade-helper"}),"how to update Upgrade Helper"),".")),(0,a.kt)("h3",u({},{id:"6-broadcast-that-release-candidate-is-out"}),"6. Broadcast that release candidate is out"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"React Native Twitter."),(0,a.kt)("li",{parentName:"ul"},"Discord ",(0,a.kt)("inlineCode",{parentName:"li"},"#releases-coordination")," channel.")))}b.isMDXComponent=!0}}]);