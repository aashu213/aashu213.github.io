"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[50337],{35318:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return d}});var n=r(27378);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),p=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),h=p(r),d=a,m=h["".concat(l,".").concat(d)]||h[d]||c[d]||o;return r?n.createElement(m,i(i({ref:t},u),{},{components:r})):n.createElement(m,i({ref:t},u))}));function d(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var p=2;p<o;p++)i[p]=r[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},57989:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return h},contentTitle:function(){return d},metadata:function(){return m},assets:function(){return g},toc:function(){return f},default:function(){return w}});var n=r(35318),a=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(s)for(var r of s(t))p.call(t,r)&&u(e,r,t[r]);return e};const h={title:"An update on the New Architecture Rollout",authors:["cortinico"],tags:["announcement"],date:new Date("2022-03-15T00:00:00.000Z")},d="An update on the New Architecture Rollout",m={permalink:"/blog/2022/03/15/an-update-on-the-new-architecture-rollout",source:"@site/blog/2022-03-15-an-update-on-the-new-architecture-rollout.md",title:"An update on the New Architecture Rollout",description:"Hi everyone,",date:"2022-03-15T00:00:00.000Z",formattedDate:"March 15, 2022",tags:[{label:"announcement",permalink:"/blog/tags/announcement"}],readingTime:6.815,truncated:!0,authors:[{name:"Nicola Corti",title:"Software Engineer at Meta",url:"https://twitter.com/cortinico",imageURL:"https://github.com/cortinico.png",key:"cortinico"}],prevItem:{title:"Announcing React Native 0.68",permalink:"/blog/2022/03/30/version-068"},nextItem:{title:"React Native - H2 2021 Recap",permalink:"/blog/2022/01/21/react-native-h2-2021-recap"}},g={authorsImageUrls:[void 0]},f=[{value:"The Working Group",id:"the-working-group",children:[],level:3},{value:"The Migration Guide",id:"the-migration-guide",children:[],level:3},{value:"The New Architecture Template",id:"the-new-architecture-template",children:[],level:3},{value:"The 3rd-party Libraries Ecosystem",id:"the-3rd-party-libraries-ecosystem",children:[],level:3},{value:"Releases",id:"releases",children:[],level:3},{value:"Towards Hermes as Default engine",id:"towards-hermes-as-default-engine",children:[],level:3}],k={toc:f};function w(e){var t,r=e,{components:a}=r,u=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))t.indexOf(n)<0&&p.call(e,n)&&(r[n]=e[n]);return r})(r,["components"]);return(0,n.kt)("wrapper",(t=c(c({},k),u),o(t,i({components:a,mdxType:"MDXLayout"}))),(0,n.kt)("p",null,"Hi everyone,\n",(0,n.kt)("a",c({parentName:"p"},{href:"/blog/2022/01/21/react-native-h2-2021-recap#the-new-architecture-rollout-and-releases"}),"As previously announced"),":"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"2022 is going to be the year of the New Architecture in open source")),(0,n.kt)("p",null,"If you still haven\u2019t had the time to look into the New React Native Architecture (the Fabric Renderer and the TurboModule system), there is no better time to do it ",(0,n.kt)("strong",{parentName:"p"},"than now"),"!"),(0,n.kt)("p",null,"We would like to share with the community some initiatives and material we prepared to make sure everyone is onboard on this endeavor."),(0,n.kt)("h3",c({},{id:"the-working-group"}),"The Working Group"),(0,n.kt)("p",null,"Recently, we launched the ",(0,n.kt)("a",c({parentName:"p"},{href:"https://github.com/reactwg/react-native-new-architecture"}),"React Native New Architecture Working Group")," on GitHub, a ",(0,n.kt)("em",{parentName:"p"},"discussion only")," repository to coordinate and support the rollout of the New Architecture across the ecosystem."),(0,n.kt)("p",null,"We envision this working group as a space where the community can ",(0,n.kt)("strong",{parentName:"p"},"meet"),", share ",(0,n.kt)("strong",{parentName:"p"},"ideas"),", and ",(0,n.kt)("strong",{parentName:"p"},"discuss")," challenges during the adoption of the New Architecture. Moreover, we're going to use this working group to ",(0,n.kt)("strong",{parentName:"p"},"share")," information and updates with the wider community for the sake of transparency."),(0,n.kt)("p",null,"To keep the discussion focused, we decided to have this working group ",(0,n.kt)("strong",{parentName:"p"},"open to read")," publicly and ",(0,n.kt)("strong",{parentName:"p"},"restricted to write")," only for approved users."),(0,n.kt)("p",null,"If you wish to join the conversation, you can ",(0,n.kt)("a",c({parentName:"p"},{href:"https://forms.gle/8emgdwFZXuzEpyyn9"}),"fill in this form")," to either ",(0,n.kt)("strong",{parentName:"p"},"apply or nominate")," someone that you think would be a valuable addition to the discussion."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Everyone is welcome")," to apply to join the conversation."),(0,n.kt)("p",null,"As every discussion forum, we would like to stress once more the importance of being ",(0,n.kt)("strong",{parentName:"p"},"respectful")," and welcoming towards others\u2019 opinions. Please take the chance to read our ",(0,n.kt)("a",c({parentName:"p"},{href:"https://github.com/reactwg/react-native-new-architecture/blob/main/CODE_OF_CONDUCT.md"}),(0,n.kt)("strong",{parentName:"a"},"code of conduct"))," if you haven\u2019t yet done it."),(0,n.kt)("h3",c({},{id:"the-migration-guide"}),"The Migration Guide"),(0,n.kt)("p",null,"After several rounds of review & feedback, we finally merged ",(0,n.kt)("strong",{parentName:"p"},"the Migration Guide")," (f.k.a. ",(0,n.kt)("em",{parentName:"p"},"the Playbook"),"). You can find it ",(0,n.kt)("a",c({parentName:"p"},{href:"/docs/next/new-architecture-intro"}),"on the website in the Guides section.")),(0,n.kt)("p",null,"This Migration Guide will show you ",(0,n.kt)("strong",{parentName:"p"},"how to create a custom Fabric component or a TurboModule")," with a step-by-step approach. The guide will also show you how to ",(0,n.kt)("strong",{parentName:"p"},"adapt your existing app or library")," to use the New Architecture."),(0,n.kt)("p",null,"Moreover, we would like to remind you the brand-new ",(0,n.kt)("a",c({parentName:"p"},{href:"/architecture/overview"}),"Architecture section")," of our website. There you can find several in-depth articles and explanation of the React Native internals. Specifically, ",(0,n.kt)("a",c({parentName:"p"},{href:"/architecture/fabric-renderer"}),"the Fabric section")," can help you understand the rendering pipeline in the New Architecture world."),(0,n.kt)("p",null,"Finally, please consider ",(0,n.kt)("strong",{parentName:"p"},"sharing your feedback")," to this documentation material ",(0,n.kt)("a",c({parentName:"p"},{href:"https://github.com/reactwg/react-native-new-architecture/discussions/7"}),"on the working group"),". We\u2019re constantly looking for developer\u2019s opinion, and we want to make sure we\u2019re delivering the content that you find most useful."),(0,n.kt)("p",null,"Over the next months, we will look into refining and adding more documentation to help you further."),(0,n.kt)("h3",c({},{id:"the-new-architecture-template"}),"The New Architecture Template"),(0,n.kt)("p",null,"React Native ",(0,n.kt)("strong",{parentName:"p"},"0.68.0")," is close to release. This version of React Native marks a crucial milestone in the New Architecture Rollout as it\u2019s the first version to include an ",(0,n.kt)("strong",{parentName:"p"},"opt-in switch")," in the ",(0,n.kt)("strong",{parentName:"p"},"new app template.")),(0,n.kt)("p",null,"This means that you will be able to try the New Architecture ",(0,n.kt)("strong",{parentName:"p"},"by changing one line")," in the template. We also added extensive ",(0,n.kt)("strong",{parentName:"p"},"comments and documentation")," to the template to make sure you don\u2019t need extra reading to use it out of the box. We hope this will help you adopt the New Architecture by ",(0,n.kt)("strong",{parentName:"p"},"reducing the amount of code")," your have to write."),(0,n.kt)("p",null,"In the next releases, we will keep on updating the template to make it even more streamlined and simple to use."),(0,n.kt)("p",null,"To enable the New Architecture on either platform, you can:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"On iOS, run ",(0,n.kt)("inlineCode",{parentName:"li"},"RCT_NEW_ARCH_ENABLED=1 bundle exec pod install")," inside the ",(0,n.kt)("inlineCode",{parentName:"li"},"ios")," folder."),(0,n.kt)("li",{parentName:"ul"},"On Android, set the ",(0,n.kt)("inlineCode",{parentName:"li"},"newArchEnabled")," property to ",(0,n.kt)("inlineCode",{parentName:"li"},"true")," by ",(0,n.kt)("strong",{parentName:"li"},"either"),":",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Changing the corresponding line inside the ",(0,n.kt)("inlineCode",{parentName:"li"},"android/gradle.properties")," file."),(0,n.kt)("li",{parentName:"ul"},"Set an environment variable ",(0,n.kt)("inlineCode",{parentName:"li"},"ORG_GRADLE_PROJECT_newArchEnabled=true")),(0,n.kt)("li",{parentName:"ul"},"Invoke Gradle with ",(0,n.kt)("inlineCode",{parentName:"li"},"-PnewArchEnabled=true"))))),(0,n.kt)("p",null,"Then you can ",(0,n.kt)("strong",{parentName:"p"},"run your app")," with ",(0,n.kt)("inlineCode",{parentName:"p"},"yarn react-native run-android")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"run-ios")," and you\u2019ll be running using Fabric and TurboModules enabled."),(0,n.kt)("p",null,"Please consider trying this new template, and ",(0,n.kt)("a",c({parentName:"p"},{href:"https://github.com/reactwg/react-native-new-architecture/discussions/5"}),"report any bug or unexpected behavior")," that you might face. Over the last months we worked hard to fix bugs and build failures that would have been ",(0,n.kt)("strong",{parentName:"p"},"hard to catch")," without the constant community feedback and testing."),(0,n.kt)("h3",c({},{id:"the-3rd-party-libraries-ecosystem"}),"The 3rd-party Libraries Ecosystem"),(0,n.kt)("p",null,"The community won't be able to migrate to the New Architecture without the full support of ",(0,n.kt)("strong",{parentName:"p"},"3rd-party libraries author & maintainers"),"."),(0,n.kt)("p",null,"We understand how this can be a tedious process, and we understand the importance of supporting users on ",(0,n.kt)("strong",{parentName:"p"},"both")," old and New Architecture. Over the next months, we will focus on supporting our library developers to help them migrate over."),(0,n.kt)("p",null,"If you\u2019re a ",(0,n.kt)("strong",{parentName:"p"},"library developer"),", ",(0,n.kt)("a",c({parentName:"p"},{href:"https://github.com/reactwg/react-native-new-architecture/discussions/categories/libraries"}),"we invite you to post an update")," in the New Architecture working group with the ",(0,n.kt)("strong",{parentName:"p"},"status of your libraries"),". This will help you attract early adopters and us to understand if any library is facing a blocker."),(0,n.kt)("p",null,"If instead you\u2019re a ",(0,n.kt)("strong",{parentName:"p"},"library user"),", you can ",(0,n.kt)("a",c({parentName:"p"},{href:"https://github.com/reactwg/react-native-new-architecture/discussions/6"}),"post a message here")," to request a migration of a library. If we identify a library that becomes a blocker for a number of users, we will try to reach out to the maintainer and understand why they haven\u2019t migrated yet."),(0,n.kt)("p",null,"Finally, we would like to give a shout out to Software Mansion for releasing a new version of ",(0,n.kt)("a",c({parentName:"p"},{href:"https://github.com/software-mansion/react-native-screens"}),(0,n.kt)("inlineCode",{parentName:"a"},"react-native-screens")),", which has support for both architectures. Moreover, they published a blog-post (",(0,n.kt)("a",c({parentName:"p"},{href:"https://blog.swmansion.com/introducing-fabric-to-react-native-screens-fd17bf18858e"}),"Introducing Fabric to react-native-screens"),") where they ",(0,n.kt)("strong",{parentName:"p"},"tell their migration story"),". We hope you will find this story inspiring and useful to tackle your migration."),(0,n.kt)("h3",c({},{id:"releases"}),"Releases"),(0,n.kt)("p",null,"Work on the 0.68 pre-release has realized much of ",(0,n.kt)("a",c({parentName:"p"},{href:"/blog/2022/01/19/version-067#improvements-to-release-process"}),"the improved release process we had defined last half"),"."),(0,n.kt)("p",null,"We\u2019re happy to share that with 0.68 we were able to:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Successfully onboard release work to an internal rotation. Much of this is supported by ",(0,n.kt)("a",c({parentName:"li"},{href:"https://opensource.guide/how-to-contribute/"}),"improved documentation")," on the release process which will reduce the bus factor of the release process."),(0,n.kt)("li",{parentName:"ul"},"Initiated discussions with partners to support a ","[Copilot rotation]",". We hope this effort will improve transparency of the process and inform our partners where to invest to support React Native releases and eco-system."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",c({parentName:"li"},{href:"https://github.com/reactwg/react-native-releases/discussions/11"}),"Onboarded several Release Supporters and Testers from the community"),". We had put a call-out for help last half and so many folks stepped up! The feedback from our testers and supporters have ",(0,n.kt)("strong",{parentName:"li"},"helped us fix crucial bugs")," and regressions, especially around the new architecture, for the upcoming release. Thank you to everyone who signed up and tested out the release!")),(0,n.kt)("p",null,"With React Native 0.69 we will continue refining this process, ideally getting partners to provide earlier release signal and onboarding co-pilots. As always, ",(0,n.kt)("a",c({parentName:"p"},{href:"https://github.com/reactwg/react-native-releases/discussions"}),"any feedback is more than welcome"),". If you\u2019d like to join as a release tester or supporter, ",(0,n.kt)("a",c({parentName:"p"},{href:"https://forms.gle/fPuPE1MZRDGWNqpd6"}),"please sign up here"),"."),(0,n.kt)("h3",c({},{id:"towards-hermes-as-default-engine"}),"Towards Hermes as Default engine"),(0,n.kt)("p",null,"One of the crucial point of the New Architecture Rollout is the adoption of the new JavaScript engine: ",(0,n.kt)("strong",{parentName:"p"},"Hermes.")),(0,n.kt)("p",null,"With the New React Native Architecture, we\u2019re going to ",(0,n.kt)("strong",{parentName:"p"},"set Hermes as default engine"),". This means that all the new documentation and templates will have Hermes enabled."),(0,n.kt)("p",null,"Please note that we'll continue working with the community to make sure ",(0,n.kt)("strong",{parentName:"p"},"other engines"),", such as JSC (JavaScript Core), ",(0,n.kt)("strong",{parentName:"p"},"are supported"),". You can still use the engine you wish, but you\u2019ll have to ",(0,n.kt)("strong",{parentName:"p"},"explicitly disable Hermes"),"."),(0,n.kt)("p",null,"To improve the stability of Hermes, we\u2019re working towards changing the ",(0,n.kt)("strong",{parentName:"p"},"distribution model")," of Hermes. Specifically, we envision the Hermes release process ",(0,n.kt)("strong",{parentName:"p"},"to be closer")," to the React Native release process."),(0,n.kt)("p",null,"This will allow us to ship a version of React Native, with a bundled JS engine that is ",(0,n.kt)("strong",{parentName:"p"},"fully compatible"),". You won\u2019t have to deal with run-time crashes and Hermes incompatibilities that are really hard to debug and understand."),(0,n.kt)("p",null,"Moreover, this will ",(0,n.kt)("strong",{parentName:"p"},"shorten the cycle")," for picking up ",(0,n.kt)("strong",{parentName:"p"},"improvements")," and bug fixes in Hermes, which will allow us to be more ",(0,n.kt)("strong",{parentName:"p"},"responsive")," to the needs of React Native users."),(0,n.kt)("p",null,"We will be sharing more on this matter in the coming months. In the meanwhile, feel free to ",(0,n.kt)("a",c({parentName:"p"},{href:"https://github.com/reactwg/react-native-new-architecture/discussions/4"}),"join the discussion")," about it on the Working Group."),(0,n.kt)("p",null,"If you haven\u2019t tried Hermes yet, now is the time to give it a go. And please make sure to flag any issues or blockers you might face."),(0,n.kt)("p",null,"With this, that\u2019s a wrap."),(0,n.kt)("p",null,"I\u2019d like to thank Andrei, Aleksandar, Dmitry, Eli, Luna, H\xe9ctor & Neil for reviewing this blog-post and providing valuable contributions to those efforts."),(0,n.kt)("p",null,"And looking forward to ",(0,n.kt)("strong",{parentName:"p"},"reading your migration stories"),"."))}w.isMDXComponent=!0}}]);