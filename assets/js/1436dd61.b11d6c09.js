"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[16185],{35318:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(27378);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=o,k=d["".concat(s,".").concat(m)]||d[m]||u[m]||i;return n?a.createElement(k,r(r({ref:t},p),{},{components:n})):a.createElement(k,r({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var c=2;c<i;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},69964:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return d},contentTitle:function(){return m},metadata:function(){return k},toc:function(){return h},default:function(){return N}});var a=n(35318),o=Object.defineProperty,i=Object.defineProperties,r=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&p(e,n,t[n]);if(l)for(var n of l(t))c.call(t,n)&&p(e,n,t[n]);return e};const d={id:"geolocation",title:"\ud83d\udea7 Geolocation"},m=void 0,k={unversionedId:"geolocation",id:"version-0.61/geolocation",title:"\ud83d\udea7 Geolocation",description:"Deprecated. Use @react-native-community/geolocation instead.",source:"@site/versioned_docs/version-0.61/geolocation.md",sourceDirName:".",slug:"/geolocation",permalink:"/docs/0.61/geolocation",editUrl:"https://github.com/facebook/react-native-website/blob/master/website/../docs/geolocation.md",tags:[],version:"0.61",lastUpdatedAt:1648760516,formattedLastUpdatedAt:"4/1/2022",frontMatter:{id:"geolocation",title:"\ud83d\udea7 Geolocation"}},h=[{value:"Configuration and Permissions",id:"configuration-and-permissions",children:[{value:"iOS",id:"ios",children:[],level:4},{value:"Android",id:"android",children:[],level:4}],level:3},{value:"Methods",id:"methods",children:[],level:3},{value:"Methods",id:"methods-1",children:[{value:"<code>setRNConfiguration()</code>",id:"setrnconfiguration",children:[],level:3},{value:"<code>requestAuthorization()</code>",id:"requestauthorization",children:[],level:3},{value:"<code>getCurrentPosition()</code>",id:"getcurrentposition",children:[],level:3},{value:"<code>watchPosition()</code>",id:"watchposition",children:[],level:3},{value:"<code>clearWatch()</code>",id:"clearwatch",children:[],level:3},{value:"<code>stopObserving()</code>",id:"stopobserving",children:[],level:3}],level:2}],g={toc:h};function N(e){var t,n=e,{components:o}=n,p=((e,t)=>{var n={};for(var a in e)s.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&l)for(var a of l(e))t.indexOf(a)<0&&c.call(e,a)&&(n[a]=e[a]);return n})(n,["components"]);return(0,a.kt)("wrapper",(t=u(u({},g),p),i(t,r({components:o,mdxType:"MDXLayout"}))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Deprecated.")," Use ",(0,a.kt)("a",u({parentName:"p"},{href:"https://github.com/react-native-community/react-native-geolocation"}),"@react-native-community/geolocation")," instead.")),(0,a.kt)("p",null,"The Geolocation API extends the ",(0,a.kt)("a",u({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/API/Geolocation"}),"Geolocation web spec"),"."),(0,a.kt)("p",null,"As a browser polyfill, this API is available through the ",(0,a.kt)("inlineCode",{parentName:"p"},"navigator.geolocation")," global - you do not need to ",(0,a.kt)("inlineCode",{parentName:"p"},"import")," it."),(0,a.kt)("p",null,"On Android, this uses the ",(0,a.kt)("a",u({parentName:"p"},{href:"https://developer.android.com/reference/android/location/package-summary"}),"android.location API"),". This API is not recommended by Google because it is less accurate and slower than the recommended ",(0,a.kt)("a",u({parentName:"p"},{href:"https://developer.android.com/training/location/"}),"Google Location Services API"),". In order to use it with React Native, use the ",(0,a.kt)("a",u({parentName:"p"},{href:"https://github.com/Agontuk/react-native-geolocation-service"}),"react-native-geolocation-service")," module."),(0,a.kt)("h3",u({},{id:"configuration-and-permissions"}),"Configuration and Permissions"),(0,a.kt)("div",{class:"banner-crna-ejected"},(0,a.kt)("h3",null,"Projects with Native Code Only"),(0,a.kt)("p",null,"This section only applies to projects made with ",(0,a.kt)("code",null,"react-native init"),"or to those made with ",(0,a.kt)("code",null,"expo init")," or Create React Native App which have since ejected. For more information about ejecting, please see the ",(0,a.kt)("a",{href:"https://github.com/react-community/create-react-native-app/blob/master/EJECTING.md",target:"_blank"},"guide")," on the Create React Native App repository.")),(0,a.kt)("h4",u({},{id:"ios"}),"iOS"),(0,a.kt)("p",null,"You need to include the ",(0,a.kt)("inlineCode",{parentName:"p"},"NSLocationWhenInUseUsageDescription")," key in Info.plist to enable geolocation when using the app. Geolocation is enabled by default when you create a project with ",(0,a.kt)("inlineCode",{parentName:"p"},"react-native init"),"."),(0,a.kt)("p",null,"In order to enable geolocation in the background, you need to include the 'NSLocationAlwaysUsageDescription' key in Info.plist and add location as a background mode in the 'Capabilities' tab in Xcode."),(0,a.kt)("p",null,"If you are using CocoaPods for React Native, make sure to include the ",(0,a.kt)("inlineCode",{parentName:"p"},"RCTGeolocation")," sub-podspec."),(0,a.kt)("h4",u({},{id:"android"}),"Android"),(0,a.kt)("p",null,"To request access to location, you need to add the following line to your app's ",(0,a.kt)("inlineCode",{parentName:"p"},"AndroidManifest.xml"),":"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},'<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />')),(0,a.kt)("p",null,"Android API >= 18 Positions will also contain a ",(0,a.kt)("inlineCode",{parentName:"p"},"mocked")," boolean to indicate if position was created from a mock provider."),(0,a.kt)("p",null,"Android API >= 23 Requires an additional step to check for, and request the ACCESS_FINE_LOCATION permission using the ",(0,a.kt)("a",{href:"/docs/permissionsandroid",target:"_blank"},"PermissionsAndroid API"),". Failure to do so may result in a hard crash."),(0,a.kt)("h3",u({},{id:"methods"}),"Methods"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",u({parentName:"li"},{href:"#setrnconfiguration"}),(0,a.kt)("inlineCode",{parentName:"a"},"setRNConfiguration"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",u({parentName:"li"},{href:"#requestauthorization"}),(0,a.kt)("inlineCode",{parentName:"a"},"requestAuthorization"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",u({parentName:"li"},{href:"#getcurrentposition"}),(0,a.kt)("inlineCode",{parentName:"a"},"getCurrentPosition"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",u({parentName:"li"},{href:"#watchposition"}),(0,a.kt)("inlineCode",{parentName:"a"},"watchPosition"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",u({parentName:"li"},{href:"#clearwatch"}),(0,a.kt)("inlineCode",{parentName:"a"},"clearWatch"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",u({parentName:"li"},{href:"#stopobserving"}),(0,a.kt)("inlineCode",{parentName:"a"},"stopObserving")))),(0,a.kt)("hr",null),(0,a.kt)("h1",u({},{id:"reference"}),"Reference"),(0,a.kt)("h2",u({},{id:"methods-1"}),"Methods"),(0,a.kt)("h3",u({},{id:"setrnconfiguration"}),(0,a.kt)("inlineCode",{parentName:"h3"},"setRNConfiguration()")),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{className:"language-jsx"}),"geolocation.setRNConfiguration(config);\n")),(0,a.kt)("p",null,"Sets configuration options that will be used in all location requests."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Parameters:")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Name"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Type"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Required"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"config"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"object"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"Yes"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"See below.")))),(0,a.kt)("p",null,"Supported options:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"skipPermissionRequests")," (boolean, iOS-only) - Defaults to ",(0,a.kt)("inlineCode",{parentName:"li"},"false"),". If ",(0,a.kt)("inlineCode",{parentName:"li"},"true"),", you must request permissions before using Geolocation APIs.")),(0,a.kt)("hr",null),(0,a.kt)("h3",u({},{id:"requestauthorization"}),(0,a.kt)("inlineCode",{parentName:"h3"},"requestAuthorization()")),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{className:"language-jsx"}),"geolocation.requestAuthorization();\n")),(0,a.kt)("p",null,"Request suitable Location permission based on the key configured on pList. If NSLocationAlwaysUsageDescription is set, it will request Always authorization, although if NSLocationWhenInUseUsageDescription is set, it will request InUse authorization."),(0,a.kt)("hr",null),(0,a.kt)("h3",u({},{id:"getcurrentposition"}),(0,a.kt)("inlineCode",{parentName:"h3"},"getCurrentPosition()")),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{className:"language-jsx"}),"geolocation.getCurrentPosition(\n  geo_success,\n  [geo_error],\n  [geo_options]\n);\n")),(0,a.kt)("p",null,"Invokes the success callback once with the latest location info."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Parameters:")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Name"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Type"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Required"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"geo_success"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"function"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"Yes"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"Invoked with latest location info.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"geo_error"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"function"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"No"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"Invoked whenever an error is encountered.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"geo_options"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"object"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"No"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"See below.")))),(0,a.kt)("p",null,"Supported options:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"timeout")," (ms) - Is a positive value representing the maximum length of time (in milliseconds) the device is allowed to take in order to return a position. Defaults to INFINITY."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"maximumAge")," (ms) - Is a positive value indicating the maximum age in milliseconds of a possible cached position that is acceptable to return. If set to 0, it means that the device cannot use a cached position and must attempt to retrieve the real current position. If set to Infinity the device will always return a cached position regardless of its age. Defaults to INFINITY."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"enableHighAccuracy")," (bool) - Is a boolean representing if to use GPS or not. If set to true, a GPS position will be requested. If set to false, a WIFI location will be requested.")),(0,a.kt)("hr",null),(0,a.kt)("h3",u({},{id:"watchposition"}),(0,a.kt)("inlineCode",{parentName:"h3"},"watchPosition()")),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{className:"language-jsx"}),"geolocation.watchPosition(success, [error], [options]);\n")),(0,a.kt)("p",null,"Invokes the success callback whenever the location changes. Returns a ",(0,a.kt)("inlineCode",{parentName:"p"},"watchId")," (number)."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Parameters:")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Name"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Type"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Required"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"success"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"function"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"Yes"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"Invoked whenever the location changes.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"error"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"function"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"No"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"Invoked whenever an error is encountered.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"options"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"object"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"No"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"See below.")))),(0,a.kt)("p",null,"Supported options:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"timeout")," (ms) - Is a positive value representing the maximum length of time (in milliseconds) the device is allowed to take in order to return a position. Defaults to INFINITY."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"maximumAge")," (ms) - Is a positive value indicating the maximum age in milliseconds of a possible cached position that is acceptable to return. If set to 0, it means that the device cannot use a cached position and must attempt to retrieve the real current position. If set to Infinity the device will always return a cached position regardless of its age. Defaults to INFINITY."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"enableHighAccuracy")," (bool) - Is a boolean representing if to use GPS or not. If set to true, a GPS position will be requested. If set to false, a WIFI location will be requested."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"distanceFilter")," (m) - The minimum distance from the previous location to exceed before returning a new location. Set to 0 to not filter locations. Defaults to 100m."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"useSignificantChanges")," (bool) - Uses the battery-efficient native significant changes APIs to return locations. Locations will only be returned when the device detects a significant distance has been breached. Defaults to FALSE.")),(0,a.kt)("hr",null),(0,a.kt)("h3",u({},{id:"clearwatch"}),(0,a.kt)("inlineCode",{parentName:"h3"},"clearWatch()")),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{className:"language-jsx"}),"geolocation.clearWatch(watchID);\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Parameters:")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Name"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Type"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Required"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"watchID"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"number"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"Yes"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"Id as returned by ",(0,a.kt)("inlineCode",{parentName:"td"},"watchPosition()"),".")))),(0,a.kt)("hr",null),(0,a.kt)("h3",u({},{id:"stopobserving"}),(0,a.kt)("inlineCode",{parentName:"h3"},"stopObserving()")),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{className:"language-jsx"}),"geolocation.stopObserving();\n")),(0,a.kt)("p",null,"Stops observing for device location changes. In addition, it removes all listeners previously registered."),(0,a.kt)("p",null,"Notice that this method has only effect if the ",(0,a.kt)("inlineCode",{parentName:"p"},"geolocation.watchPosition(successCallback, errorCallback)")," method was previously invoked."))}N.isMDXComponent=!0}}]);